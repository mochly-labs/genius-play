<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Genius Play! - Carregando...</title>
    <link href="icons/css/fontawesome.css" rel="stylesheet" />
    <link href="icons/css/brands.css" rel="stylesheet" />
    <link href="icons/css/solid.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="icons/favicon.png" rel="icon" type="image/png" />
    <style>
      @font-face {
        font-family: "Quicksand";
        src: url("/fonts/Quicksand.ttf") format("truetype");
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: black;
        font-family: "Quicksand", sans-serif;
        overflow: hidden;
      }

      #gameFrame {
        width: 100%;
        height: 100%;
        border: none;
        display: none;
        opacity: 0;
      }

      /* Animação de entrada do logo */
      .animate-zoom-in {
        animation: zoomIn 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      }

      /* Animação de fade-in para o iframe */
      .animate-fade-in {
        animation: fadeIn 1s ease-in-out forwards;
      }

      /* Animação de fade-out para a tela de carregamento */
      .animate-fade-out {
        animation: fadeOut 0.8s ease-in-out forwards;
      }

      /* Animação da barra de progresso */
      #progressBar {
        animation: fillProgress .25s ease-out forwards;
      }

      @keyframes zoomIn {
        from {
          opacity: 0;
          transform: scale(0.5);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes fillProgress {
        from {
          width: 0%;
        }
        to {
          width: 100%;
        }
      }
    </style>
  </head>
  <body class="bg-black">
    <!-- Tela de Carregamento -->
    <div
      id="loadingScreen"
      class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black"
    >
      <div class="animate-zoom-in flex flex-col items-center justify-center ">
        <div class="logo-container">
          <h1 class="text-5xl text-white text-center">
            <span class="text-green-400">
              <i class="fa-solid fa-graduation-cap mr-2"></i>
              <span
                class="bg-gradient-to-r from-green-400 via-yellow-400 to-red-400 bg-clip-text text-transparent"
                >Genius</span
              >
            </span>
            <span
              class="bg-gradient-to-r from-purple-500 to-blue-500 bg-clip-text text-transparent"
              >Play!</span
            >
          </h1>
        </div>

        <!-- Barra de Progresso Decorativa -->
        <div
          class="w-64 bg-gray-800 rounded-full h-2.5 mt-8 border border-gray-600"
        >
          <div
            id="progressBar"
            class="bg-gradient-to-r from-green-400 to-blue-500 h-full rounded-full"
          ></div>
        </div>
      </div>
    </div>
    <!-- Iframe do Jogo -->
    <iframe src="main.html" id="gameFrame"></iframe>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const loadingScreen = document.getElementById("loadingScreen");
        const gameFrame = document.getElementById("gameFrame");
        const minLoadingTime = 250; // 3 segundos

        const startTime = Date.now();

        const hideLoadingScreen = () => {
          const elapsedTime = Date.now() - startTime;
          const remainingTime = minLoadingTime - elapsedTime;

          setTimeout(
            () => {
              loadingScreen.classList.add("animate-fade-out");

              loadingScreen.addEventListener("animationend", () => {
                loadingScreen.remove();
                gameFrame.style.display = "block";
                gameFrame.classList.add("animate-fade-in");
                document.title = "Genius Play!";
                sendMessageToGameFrame("loaded");
                gameFrame.onload = () => {
                  sendMessageToGameFrame("loaded");
                };
              });
            },
            remainingTime > 0 ? remainingTime : 0
          );
        };

        const sendMessageToGameFrame = (message) => {
          if (gameFrame.contentWindow) {
            gameFrame.contentWindow.postMessage(message, "*");
          }
        };

        gameFrame.addEventListener("load", hideLoadingScreen);
      });
    </script>
  </body>
</html>
